<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="material.css">

	<script type="text/javascript" src="cordova.js"></script>
	</head>
	<body class="mdl-demo mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">
	<div id="bl-h" class="mdl-grid" style="padding: 0px;">
		<div class="mdl-cell mdl-cell--2-col"></div>
		<div class="mdl-cell mdl-cell--8-col mdl-typography--text-center"><span id="artist">Поиск сервера</span><span id="song">Загружаем</span></div>
		<div class="mdl-cell mdl-cell--2-col"></div>
	</div>
	<div id="mainbox">
		<section  id="imgalb" class="about-panel about-panel--components mdl-color-text--white mdl-cell mdl-cell--12-col" style="margin-top: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px;">
			<div id="imgalb2" class="demo-card-image mdl-card mdl-shadow--2dp">
			  <div class="mdl-card__title mdl-card--expand"></div>
			</div>
		</section>		
	</div>
	
	
	
	<div  id="bl-p" class="mdl-grid" style="background: rgba(0,0,0,0.23);">
		<div class="mdl-cell mdl-cell--2-col"></div>
		<div class="mdl-cell mdl-cell--8-col mdl-typography--text-center"><button id ="stream"  class="mdl-button mdl-js-button mdl-button--icon "><i class="material-icons ">play_arrow</i></div>
		<div class="mdl-cell mdl-cell--2-col"></div>
	</div>
	<div  id="bl-l" class="mdl-grid">
		<div class="mdl-cell mdl-cell--3-col"></div>
		<div class="mdl-cell mdl-cell--3-col mdl-typography--text-right"><a href="#" class="mdl-color-text--white" onclick="doAction($i,'like');"><span id="like" class="mdl-badge" data-badge="-">МНЕ НРАВИТСЯ</span></a></div>
		<div class="mdl-cell mdl-cell--3-col mdl-typography--text-center"><a href="#" class="mdl-color-text--white" onclick="doAction($i,'unlike');"><span id="unlike" class="material-icons mdl-badge" data-badge="-">thumb_down</span></a></div>
		<div class="mdl-cell mdl-cell--3-col"></div>
	</div>
	<div  id="bl-b" class="mdl-grid" style="background: rgba(0,0,0,0.23);">
		<div class="mdl-cell mdl-cell--4-col mdl-typography--text-center"><a href="#" class="mdl-color-text--white"><span class="material-icons mdl-badge" data-badge="mp3">settings</span></a></div>
		<div class="mdl-cell mdl-cell--4-col mdl-typography--text-center"><a href="#" class="mdl-color-text--white"><span class="material-icons mdl-badge">favorite</span></a></div>
		<div class="mdl-cell mdl-cell--4-col mdl-typography--text-center"><a href="#" class="mdl-color-text--white"><span class="material-icons">feedback</span></a></div>
	</div>

<div id="wpar_blur"><div id="blurimg" class="blur"></div></div>

			<div class="player" id="player" style="display:none;"></div>

			<div id="p-setting"  class="col s6" style="display:none;">
					<h4>Настройки</h4>
					<form action="#">
						<label for="bitrate">Качество трансляции (битрейд)</label>
						<select id="bitrate">
							<option value="aac-32">AAC 32 кб/c</option>
							<option value="aac-64" >AAC 64 кб/c</option>
							<option value="mp3-128" selected>MP3 128 кб/c</option>
						</select>
					</form>
				</div>
				
	<style>
	.demo-card-image.mdl-card {
	  width: 256px;
	  height: 256px;
	  background: url('../assets/demos/image_card.jpg') center / cover;
	}
	.demo-card-image > .mdl-card__actions {
	  height: 52px;
	  padding: 16px;
	  background: rgba(0, 0, 0, 0.2);
	}
	.demo-card-image__filename {
	  color: #fff;
	  font-size: 14px;
	  font-weight: 500;
	}
	</style>
	<style>

@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 100;
  src: local('Roboto Thin'), local('Roboto-Thin'), url(font/Roboto-Thin.ttf) format('truetype');
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 300;
  src: local('Roboto Light'), local('Roboto-Light'), url(font/Roboto-Light.ttf) format('truetype');
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto Regular'), local('Roboto-Regular'), url(font/Roboto-Regular.ttf) format('truetype');
}



@font-face {
  font-family: 'Material Icons';
  font-style: normal;
  font-weight: 400;
  src: local('Material Icons'), local('MaterialIcons-Regular'), url(font/2fcrYFNaTjcS6g4U3t-Y5ZjZjT5FdEJ140U2DJYC3mY.woff2) format('woff2');
}

.material-icons {
  font-family: 'Material Icons';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  word-wrap: normal;
  -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased;
}


		
html, body {
  font-family: 'Roboto', 'Helvetica', sans-serif;
  margin: 0;
  padding: 0;
  height: 100%;
  max-height: 100%;
}
.mdl-demo .mdl-layout__header-row {
  padding-left: 40px;
}
.mdl-demo .mdl-layout.is-small-screen .mdl-layout__header-row h3 {
  font-size: inherit;
}
.mdl-demo .mdl-layout__tab-bar-button {
  display: none;
}
.mdl-demo .mdl-layout.is-small-screen .mdl-layout__tab-bar .mdl-button {
  display: none;
}
.mdl-demo .mdl-layout:not(.is-small-screen) .mdl-layout__tab-bar,
.mdl-demo .mdl-layout:not(.is-small-screen) .mdl-layout__tab-bar-container {
  overflow: visible;
}
.mdl-demo .mdl-layout__tab-bar-container {
  height: 64px;
}
.mdl-demo .mdl-layout__tab-bar {
  padding: 0;
  padding-left: 16px;
  box-sizing: border-box;
  height: 100%;
  width: 100%;
}
.mdl-demo .mdl-layout__tab-bar .mdl-layout__tab {
  height: 64px;
  line-height: 64px;
}
.mdl-demo .mdl-layout__tab-bar .mdl-layout__tab.is-active::after {
  background-color: white;
  height: 4px;
}
.mdl-demo main > .mdl-layout__tab-panel {
  padding: 8px;
  padding-top: 48px;
}
.mdl-demo .mdl-card {
  height: auto;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
      -ms-flex-direction: column;
          flex-direction: column;
}
.mdl-demo .mdl-card > * {
    height: 8vw;
}
.mdl-demo .mdl-card .mdl-card__supporting-text {
  margin: 40px;
  -webkit-box-flex: 1;
  -webkit-flex-grow: 1;
      -ms-flex-positive: 1;
          flex-grow: 1;
  padding: 0;
  color: inherit;
  width: calc(100% - 80px);
}
.mdl-demo.mdl-demo .mdl-card__supporting-text h4 {
  margin-top: 0;
  margin-bottom: 20px;
}
.mdl-demo .mdl-card__actions {
  margin: 0;
  padding: 4px 40px;
  color: inherit;
}
.mdl-demo .mdl-card__actions a {
  color: #00BCD4;
  margin: 0;
}
.mdl-demo .mdl-card__actions a:hover,
.mdl-demo .mdl-card__actions a:active {
  color: inherit;
  background-color: transparent;
}
.mdl-demo .mdl-card__supporting-text + .mdl-card__actions {
  border-top: 1px solid rgba(0, 0, 0, 0.12);
}
.mdl-demo #add {
  position: absolute;
  right: 40px;
  top: 36px;
  z-index: 999;
}

.mdl-demo .mdl-layout__content section:not(:last-of-type) {
  position: relative;
  margin-bottom: 48px;
}

.mdl-demo section > header{
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.mdl-demo section > .section__play-btn {
  min-height: 200px;
}
.mdl-demo section > header > .material-icons {
  font-size: 3rem;
}

.mdl-demo section .section__circle {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: start;
  -webkit-justify-content: flex-start;
      -ms-flex-pack: start;
          justify-content: flex-start;
  -webkit-box-flex: 0;
  -webkit-flex-grow: 0;
      -ms-flex-positive: 0;
          flex-grow: 0;
  -webkit-flex-shrink: 1;
      -ms-flex-negative: 1;
          flex-shrink: 1;
}
.mdl-demo section .section__text {
  -webkit-box-flex: 1;
  -webkit-flex-grow: 1;
      -ms-flex-positive: 1;
          flex-grow: 1;
  -webkit-flex-shrink: 0;
      -ms-flex-negative: 0;
          flex-shrink: 0;
  padding-top: 8px;
}
.mdl-demo section .section__text h5 {
  font-size: inherit;
  margin: 0;
  margin-bottom: 0.5em;
}
.mdl-demo section .section__text a {
  text-decoration: none;
}
.mdl-demo section .section__circle-container > .section__circle-container__circle {
  width: 64px;
  height: 64px;
  border-radius: 32px;
  margin: 8px 0;
}
.mdl-demo section.section--footer .section__circle--big {
  width: 100px;
  height: 100px;
  border-radius: 50px;
  margin: 8px 32px;
}
.mdl-demo .is-small-screen section.section--footer .section__circle--big {
  width: 50px;
  height: 50px;
  border-radius: 25px;
  margin: 8px 16px;
}
.mdl-demo section.section--footer {
  padding: 64px 0;
  margin: 0 -8px -8px -8px;
}
.mdl-demo section.section--center .section__text:not(:last-child) {
  border-bottom: 1px solid rgba(0,0,0,.13);
}
.mdl-demo .mdl-card .mdl-card__supporting-text > h3:first-child {
  margin-bottom: 24px;
}
.mdl-demo .mdl-layout__tab-panel:not(#overview) {
  background-color: white;
}
.mdl-demo #features section {
  margin-bottom: 72px;
}
.mdl-demo #features h4, #features h5 {
  margin-bottom: 16px;
}
.mdl-demo .toc {
  border-left: 4px solid #C1EEF4;
  margin: 24px;
  padding: 0;
  padding-left: 8px;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
      -ms-flex-direction: column;
          flex-direction: column;
}
.mdl-demo .toc h4 {
  font-size: 0.9rem;
  margin-top: 0;
}
.mdl-demo .toc a {
  color: #4DD0E1;
  text-decoration: none;
  font-size: 16px;
  line-height: 28px;
  display: block;
}
.mdl-demo .mdl-menu__container {
  z-index: 99;
}

button#stream {
	    color: #fff;
		width: 48px;
		height: 48px;
}
button#stream i{
	line-height: 24px;
    width: 48px;
    font-size: 48px;
    margin-left: -12px;
}
#imgalb, #mainbox {
    -webkit-transition: all 2s ease;
    -moz-transition: all 2s ease;
    -ms-transition: all 2s ease;
    -o-transition: all 2s ease;
    transition: all 2s ease;
}


.about-panel--components, .about-panel--styles, .about-panel--customize, .about-panel--templates {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    -webkit-box-pack: end;
    -webkit-justify-content: flex-end;
    -ms-flex-pack: end;
    justify-content: flex-end;
    color: #fff;
    text-transform: uppercase;
    font-size: 1.4rem;
    background-repeat: no-repeat;
    background-position: center center;
    cursor: pointer;
	float: left;
}
section#btnplay {
    width: 100%;
    margin: 0px;
    padding: 0px;
}
div#mainbox {
    display: block;
    clear: both;
}
div#blurimg {
    width: 115%;
    height: 115%;
    position: fixed;
    top: -7%;
    z-index: -10;
    background-size: cover;
    background-position: 50%;

    left: -7%;
    background-color: #000;
	opacity: 0.65;
}
div#wpar_blur {
    position: absolute;
    top: 0px;
    left: 0px;
    display: block;
    width: 100%;
    height: 100%;
    /* position: relative; */
    overflow: hidden;
	z-index: -10;
	background: #222;
	
}
#artist {
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
        font-size: 7vw;
    font-weight: 100;
    line-height: 6vw;
    margin-top: 0px;
    margin-bottom: 1px;
    color: #fff;
    display: block;
}
#song {
        font-size: 6vw;
    font-weight: 400;
    line-height: 5vw;
    letter-spacing: 0;
    margin-bottom: 16px;
    color: rgba(255,255,255,0.8);
}

.blur{
-webkit-filter:url(#blur);
filter:url(#blur);
-webkit-filter:blur(13px);
filter:blur(13px);
filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='13');
-webkit-transition:1s -webkit-filter linear;
transition:1s filter linear}
	</style>
	<script src="js/material.js"></script>
	<script src="js/jquery-2.1.4.min.js"></script>
	
	<script>
	$i = 0;
	$id = 1;

	$.getJSON("http://app.radio13.ru/status/json.php?i=i", function(info) {
			$i = info.i;
			$l = info.l;
			$u = info.u;
			$sv = parseFloat($l) + parseFloat($u);
			if($sv != 0){
				var prc = Math.round(($l * 100) / $sv);
				$('.determinate').width(prc+'%');
			}
			else {
				$('.determinate').width('0%');
			}

			$('#like').attr('data-badge', $l);
			$('#unlike').attr('data-badge', $u);
			if ($i != $id){
				$.getJSON("http://app.radio13.ru/status/json.php?i=l", function(load) {
					$id = load.id;
					$a = load.a;
					$s = load.s;
					$c = load.c;
					$vkmus = load.vk;
					$('#artist').text($a);
					$('#song').text($s);
					$('#imgalb').attr('data-caption', $a + ' - ' + $s);
					$('body').attr('id', $id);
					$('.nmbl').attr('id', $id +'_likes');
					$('.nmbu').attr('id', $id +'_unlikes');
					
					


					$.ajax({
						url: "http://ws.audioscrobbler.com/2.0/?method=album.getinfo&artist="+$a+"&album="+$s+"&api_key=88571316d4e244f24172ea9a9bf602fe",
						type: "GET",
						dataType: "xml",
						success: function(xml) {
							$(xml).find('album').each(function(){
							$(this).find('image').each(function(){
							var img = $(this).attr('size');
							if(img == "mega")
							if ($(this).text()){
								$('#imgalb2').css('background-image', 'url("'+$(this).text()+'")');
								$('#imgalb2').css('background-size', 'cover');
								$('#imgalb2').css('background-position', '50%');
								
								$('#blurimg').css('background-image', 'url("'+$(this).text()+'")');
								
								
							}
							else {
								$('#imgalb2').css('background-image', 'url("images/no-image.png")');
								$('#imgalb2').css('background-size', 'cover');
								$('#imgalb2').css('background-position', '50%');
								$('#blurimg').css('background-image', 'url("images/no-image.png")');
							}
							})
							});
						},
						statusCode: {
							400: function() {
								$('#imgalb2').css('background-image', 'url("images/no-image.png")');
								$('#imgalb2').css('background-size', 'cover');
								$('#imgalb2').css('background-position', '50%');
								$('#blurimg').css('background-image', 'url("images/no-image.png")');
							}
						}
					});

				});

			}
		});
		setInterval(function(){
			$.getJSON("http://app.radio13.ru/status/json.php?i=i", function(info) {
				$i = info.i;
				$l = info.l;
				$u = info.u;
				$sv = parseFloat($l) + parseFloat($u);
				if($sv != 0){
					var prc = Math.round(($l * 100) / $sv);
					$('.determinate').width(prc+'%');
				}
				else {
					$('.determinate').width('0%');
				}

				$('#' + $i + '_likes').text($l);
				$('#' + $i + '_unlikes').text($u);
				$('#like').attr('data-badge', $l);
				$('#unlike').attr('data-badge', $u);
				if ($i != $id){
					$.getJSON("http://app.radio13.ru/status/json.php?i=l", function(load) {
						$id = load.id;
						$a = load.a;
						$s = load.s;
						$c = load.c;
						$vkmus = load.vk;
						$('#artist').text($a);
						$('#song').text($s);
						$('#imgalb').attr('data-caption', $a + ' - ' + $s);
						$('body').attr('id', $id);
						$('.nmbl').attr('id', $id +'_likes');
						$('.nmbu').attr('id', $id +'_unlikes');

						$.ajax({
							url: "http://ws.audioscrobbler.com/2.0/?method=album.getinfo&artist="+$a+"&album="+$s+"&api_key=88571316d4e244f24172ea9a9bf602fe",
							type: "GET",
							dataType: "xml",
							success: function(xml) {
								$(xml).find('album').each(function(){
									$(this).find('image').each(function(){
										var img = $(this).attr('size');
										if(img == "mega")
										if ($(this).text()){
											$('#imgalb2').css('background-image', 'url("'+$(this).text()+'")');
											$('#imgalb2').css('background-size', 'cover');
											$('#blurimg').css('background-image', 'url("'+$(this).text()+'")');
										}
										else {
											$('#imgalb2').css('background-image', 'url("images/no-image.png")');
											$('#imgalb2').css('background-size', 'cover');
											$('#blurimg').css('background-image', 'url("images/no-image.png")');
										}
									})
								});
							},
							statusCode: {
								400: function() {
									$('#imgalb2').css('background-image', 'url("images/no-image.png")');
									$('#imgalb2').css('background-size', 'cover');
									$('#blurimg').css('background-image', 'url("images/no-image.png")');
								}
							}
						});

					});

				}
			});
			//$imgalbW = $('#imgalb').width();
			//$('#imgalb').height($imgalbW);
			//$('#infoblock').height($imgalbW);		
			//$bodyH = $('body').height();			
			//$imgalbH = $('#imgalb').height();
			//$btnplayH = $('#btnplay').height();
			//$mainbox = $bodyH - ($imgalbH + $btnplayH+80) ;
			//$mainbox = $mainbox / 2;			
				
			//$('#mainbox').css('padding-top', $mainbox);
		}, 10000);
		
				$bodyH = $('body').height();
				$bodyW = $('body').width();	
				$blH = $('#bl-h').height();	
				$blI = $('#imgalb').height() +48;
				$blP = $('#bl-p').height() +16;	
				
				$blL = $('#bl-l').height() +16;	
				$blB = $('#bl-b').height() +16;
				//alert('Высота: ' +$bodyH+', Высота шапки:'+$blH+', Высота Изображения:'+$blI+', Высота Лайков:'+$blL+', Высота подвала:'+$blB+'.')
				$blHFIX = $blH + $blP + $blL + $blB;
				$blHFIX = $bodyH - $blHFIX;
				$('#mainbox').height($blHFIX );
				if ($blHFIX >= $bodyW) {
					$('#imgalb2').height($bodyW - (13 / 100) * $bodyW);
					$('#imgalb2').width($bodyW - (13 / 100) * $bodyW);
					alert('2');
					$imagesmargintop = $bodyW - (13 / 100) * $bodyW;
					$imagesmargintop = $blHFIX - $imagesmargintop;
					$imagesmargintop = $imagesmargintop / 2;
					$('#imgalb2').css('margin-top', $imagesmargintop);
				}
				else {
					$('#imgalb2').height($blHFIX -16);
					$('#imgalb2').width($blHFIX -16);
					alert('3');
				}
				
				
				
// Сообщение вверху
//window.plugins.toast.showShortTop('Hello there!', function(a){console.log('toast success: ' + a)}, function(b){alert('toast error: ' + b)})
// Сообщение внизу
//window.plugins.toast.showLongBottom('Hello there!', function(a){console.log('toast success: ' + a)}, function(b){alert('toast error: ' + b)})
// Сообщение по центру
//window.plugins.toast.show('Hello there!', 'long', 'center', function(a){console.log('toast success: ' + a)}, function(b){alert('toast error: ' + b)})

// <a class="up btn-floating btn-large green tooltipped" onclick="doAction($i,'like');" data-tooltip="Мне нравится!"><i class="mdi-action-thumb-up"></i></a>
		function doAction(id,type){
			$.post('http://app.radio13.ru/vote/doAjaxMobile.php', {id:$i, type:type}, function(data){
				if(isNaN(parseFloat(data))){
					if (data == 'error1'){
						// $('#error1').openModal();
						// $('.check').addClass('ok red-text');
						// $('.check').text('Ошибка!');
						alert('error1');
					}
					if (data == 'error100'){
						$('#error100').openModal();
						$('.check').addClass('ok red-text');
						$('.check').text('Ошибка!');
						alert('error100');
					}
					else {
						toast(data, 5000)
					}

				}
				else{
					$('#'+id+'_'+type+'s').text(data);
				}
			});
		}
	</script>
	
	<script type="text/javascript" src="js/uppod-0.5.24.js"></script>
	<script type="text/javascript" src="js/uppod_api.js"></script>
	<script type="text/javascript" src="js/player.js"></script>
<script type="text/javascript" src="/local-notification/www/local-notification.js"></script>
<script type="text/javascript" src="/toast/www/Toast.js"></script>
  </body>
</html>